<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:PetInsulinTracker.ViewModels"
             x:Class="PetInsulinTracker.Views.SharePage"
             x:DataType="vm:ShareViewModel"
             Title="Share Pet">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="16">

            <!-- Current Share Code -->
            <Label Text="Share Code" FontSize="18" FontAttributes="Bold"
                   SemanticProperties.HeadingLevel="Level2" />

            <Frame Padding="16" CornerRadius="12" HasShadow="True"
                   IsVisible="{Binding ShareCode, Converter={StaticResource IsNotNullOrEmptyConverter}}">
                <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                    <Label Text="Your pet's share code:" FontSize="14" HorizontalOptions="Center" />
                    <Label Text="{Binding ShareCode}" FontSize="32" FontAttributes="Bold"
                           HorizontalOptions="Center" LetterSpacing="4"
                           SemanticProperties.Description="Share code" />
                    <Button Text="ðŸ“‹ Copy Code" Command="{Binding CopyShareCodeCommand}"
                            HorizontalOptions="Center" />
                    <Label Text="Share this code with family members or pet sitters so they can view and update your pet's records."
                           FontSize="12" HorizontalOptions="Center"
                           HorizontalTextAlignment="Center" TextColor="{StaticResource Gray500}" />
                </VerticalStackLayout>
            </Frame>

            <Button Text="Generate Share Code"
                    Command="{Binding GenerateShareCodeCommand}"
                    IsEnabled="{Binding IsGenerating, Converter={StaticResource InvertedBoolConverter}}"
                    HorizontalOptions="Fill" />

            <!-- Redeem Code -->
            <BoxView HeightRequest="1" Color="{StaticResource Gray300}" Margin="0,8" />
            <Label Text="Import a Pet" FontSize="18" FontAttributes="Bold"
                   SemanticProperties.HeadingLevel="Level2" />

            <Label Text="Enter a share code to import someone else's pet:" FontSize="14" />
            <Entry Text="{Binding RedeemCode}" Placeholder="e.g., ABC123"
                   CharacterSpacing="4" FontSize="20"
                   HorizontalTextAlignment="Center" MaxLength="6" />
            <Button Text="Import Pet" Command="{Binding RedeemShareCodeCommand}"
                    IsEnabled="{Binding IsRedeeming, Converter={StaticResource InvertedBoolConverter}}"
                    HorizontalOptions="Fill" />

            <!-- Status -->
            <Label Text="{Binding StatusMessage}" FontSize="14"
                   HorizontalTextAlignment="Center" TextColor="{StaticResource Primary}"
                   IsVisible="{Binding StatusMessage, Converter={StaticResource IsNotNullOrEmptyConverter}}" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
